import{u as D,aB as I,r as l,s as L,aA as x,ax as M,a as u,j as s,b as e,e as T,ah as N,L as y}from"./index-4912058c.js";import{I as A}from"./IconGoogle-4d72c538.js";const G=()=>{const k=D(),[_]=I(),n=_.get("token");l.useEffect(()=>{if(k(L("Register Boxed")),!n){p("/auth/boxed-signin");return}C()},[n]);const[c,m]=l.useState(null),[P,h]=l.useState(""),C=async()=>{var t,i;try{const a=await x.get(`http://localhost:3000/api/invitation/validate/token?token=${n}`);a.data.valid?(m(!0),h(a.data.message),g(o=>({...o,email:a.data.invitation.email,first_name:a.data.invitation.first_name||"",last_name:a.data.invitation.last_name||""})),E(a.data.invitation.level)):(m(!1),h(a.data.message))}catch(a){m(!1),h(((i=(t=a.response)==null?void 0:t.data)==null?void 0:i.message)||"Error validating token")}},p=M();u(t=>t.themeConfig.theme==="dark"||t.themeConfig.isDarkMode),u(t=>t.themeConfig.rtlClass);const S=u(t=>t.themeConfig),[j,E]=l.useState("client"),[r,g]=l.useState({first_name:"",last_name:"",email:"",password:"",confirm_password:""}),[f,d]=l.useState(""),[b,w]=l.useState(!1);l.useState(S.locale);const v=t=>{const{name:i,value:a}=t.target;g(o=>({...o,[i]:a}))},F=()=>!r.password||!r.confirm_password?(d("Please enter and confirm your password"),!1):r.password!==r.confirm_password?(d("Passwords do not match"),!1):r.password.length<6?(d("Password must be at least 6 characters long"),!1):!0;return s("div",{className:"min-h-screen relative bg-[#060818] flex items-center justify-center",children:[s("div",{className:"absolute inset-0 overflow-hidden",children:[e("img",{src:"/assets/images/auth/bg-gradient.png",alt:"background",className:"absolute w-full h-full object-cover"}),e("div",{className:"absolute inset-0 bg-[url(/assets/images/auth/map.png)] bg-center bg-cover bg-no-repeat opacity-20"}),e("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"decoration",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2 opacity-20"}),e("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"decoration",className:"absolute left-24 top-0 h-40 md:left-[30%] opacity-20"}),e("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"decoration",className:"absolute right-0 top-0 h-[300px] opacity-20"}),e("img",{src:"/assets/images/auth/polygon-object.svg",alt:"decoration",className:"absolute bottom-0 end-[28%] opacity-20"})]}),e("div",{className:"container relative z-10",children:e("div",{className:"flex items-center justify-center min-h-screen",children:e("div",{className:"panel sm:w-[600px] m-6 w-full",children:s("div",{className:"w-full p-5 bg-white rounded-lg shadow-lg dark:bg-navy-700",children:[n&&e("div",{className:`mb-4 p-4 rounded-lg shadow-sm ${c===!0?"bg-green-50 border border-green-200 text-green-500":c===!1?"bg-red-50 border border-red-200 text-red-500":"bg-yellow-50 border border-yellow-200 text-yellow-500"}`,children:P}),s("div",{className:"mb-10",children:[e("h1",{className:"text-3xl font-extrabold uppercase !leading-snug text-primary md:text-4xl",children:"Set Up Your Account"}),e("p",{className:"text-base font-bold leading-normal text-white-dark",children:"Create your password to complete account setup"})]}),f&&e("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-500 rounded-lg shadow-sm",children:f}),s("form",{className:"space-y-5 dark:text-white",onSubmit:async t=>{var i,a;if(t.preventDefault(),d(""),!!F()){w(!0);try{(await x.post("http://localhost:3000/api/auth/register",{first_name:r.first_name,last_name:r.last_name,email:r.email,password_hash:r.password,level:j,token:n})).status===201&&p("/auth/boxed-signin")}catch(o){d(((a=(i=o.response)==null?void 0:i.data)==null?void 0:a.error)||"Registration failed. Please try again.")}finally{w(!1)}}},children:[s("div",{children:[e("label",{htmlFor:"Email",children:"Email"}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"Email",type:"email",placeholder:"Enter Email",className:"form-input ps-10 placeholder:text-white-dark",value:r.email,disabled:!0,readOnly:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(T,{fill:!0})})]})]}),s("div",{children:[e("label",{htmlFor:"Password",children:"Password"}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"Password",type:"password",name:"password",placeholder:"Enter Password",className:"form-input ps-10 placeholder:text-white-dark",value:r.password,onChange:v,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(N,{fill:!0})})]})]}),s("div",{children:[e("label",{htmlFor:"ConfirmPassword",children:"Confirm Password"}),s("div",{className:"relative text-white-dark",children:[e("input",{id:"ConfirmPassword",type:"password",name:"confirm_password",placeholder:"Confirm Password",className:"form-input ps-10 placeholder:text-white-dark",value:r.confirm_password,onChange:v,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:e(N,{fill:!0})})]})]}),e("button",{type:"submit",className:"btn btn-gradient !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",disabled:b||n!==null&&c===!1,children:b?"Signing up...":"Sign up"})]}),s("div",{className:"relative my-7 text-center md:mb-9",children:[e("span",{className:"absolute inset-x-0 top-1/2 h-px w-full -translate-y-1/2 bg-white-light dark:bg-white-dark"}),e("span",{className:"relative bg-white px-2 font-bold uppercase text-white-dark dark:bg-dark dark:text-white-light",children:"or"})]}),e("div",{className:"mb-10 md:mb-[60px]",children:e("ul",{className:"flex justify-center gap-3.5",children:e("li",{children:e(y,{to:"#",className:"inline-flex h-8 w-8 items-center justify-center rounded-full p-0 transition hover:scale-110",style:{background:"linear-gradient(135deg, rgba(239, 18, 98, 1) 0%, rgba(67, 97, 238, 1) 100%)"},children:e(A,{})})})})}),s("div",{className:"text-center",children:["Already have an account ?Â ",e(y,{to:"/auth/boxed-signin",className:"uppercase text-primary underline transition hover:text-black dark:hover:text-white",children:"SIGN IN"})]})]})})})})]})};export{G as default};
