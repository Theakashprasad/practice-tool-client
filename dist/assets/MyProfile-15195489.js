import{r as n,aA as v,aQ as g,b as e,j as a,G as D}from"./index-4912058c.js";import{I as w}from"./IconSave-eb3d2ef6.js";const E=()=>{const[l,f]=n.useState(null),[x,d]=n.useState(!0),[p,u]=n.useState(""),[o,b]=n.useState(!1),[c,N]=n.useState({});n.useEffect(()=>{y()},[]);const y=async()=>{var t,s;try{const i=JSON.parse(localStorage.getItem("userData")||"{}").id;if(!i){u("User ID not found"),d(!1);return}const m=await v.get(g.USERS.BY_ID(i));f(m.data),N(m.data)}catch(r){u(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to fetch user details")}finally{d(!1)}},h=t=>{const{name:s,value:r}=t.target;N(i=>({...i,[s]:r}))},S=async()=>{var t,s;try{d(!0);const i=JSON.parse(localStorage.getItem("userData")||"{}").id;await v.put(g.USERS.BY_ID(i),c),f(m=>({...m,...c})),b(!1),alert("Profile updated successfully!")}catch(r){u(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to update profile"),alert("Failed to update profile. Please try again.")}finally{d(!1)}};return x?e("div",{className:"flex items-center justify-center min-h-screen",children:e("div",{className:"animate-spin border-4 border-primary border-l-transparent rounded-full w-10 h-10"})}):p?e("div",{className:"flex items-center justify-center min-h-screen",children:e("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:p})}):e("div",{className:"pt-5 px-4",children:a("div",{className:"panel",children:[a("div",{className:"flex items-center justify-between mb-5",children:[e("h5",{className:"font-semibold text-lg dark:text-white-light",children:"My Profile"}),o?a("button",{onClick:S,className:"btn btn-success btn-sm flex items-center",children:[e(w,{className:"w-4 h-4 mr-2"}),"Save Changes"]}):a("button",{onClick:()=>b(!0),className:"btn btn-primary btn-sm flex items-center",children:[e(D,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),l&&e("div",{className:"space-y-5",children:e("div",{className:"border border-[#ebedf2] dark:border-[#191e3a] rounded-md p-4 mb-5 bg-white dark:bg-black",children:a("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"text-white-dark",children:"First Name"}),o?e("input",{type:"text",name:"first_name",className:"form-input",value:c.first_name||"",onChange:h}):e("div",{className:"font-semibold",children:l.first_name})]}),a("div",{children:[e("label",{className:"text-white-dark",children:"Last Name"}),o?e("input",{type:"text",name:"last_name",className:"form-input",value:c.last_name||"",onChange:h}):e("div",{className:"font-semibold",children:l.last_name})]}),a("div",{children:[e("label",{className:"text-white-dark",children:"Email"}),o?e("input",{type:"email",name:"email",className:"form-input",value:c.email||"",onChange:h}):e("div",{className:"font-semibold",children:l.email})]}),a("div",{children:[e("label",{className:"text-white-dark",children:"Role"}),e("div",{className:"font-semibold capitalize",children:l.level})]}),a("div",{children:[e("label",{className:"text-white-dark",children:"Member Since"}),e("div",{className:"font-semibold",children:new Date(l.created_at).toLocaleDateString()})]})]})})})]})})};export{E as default};
