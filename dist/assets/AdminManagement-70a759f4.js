import{u as P,r as l,s as L,aD as b,S as $,j as a,b as e,A as M,i as D,ab as J,k as O,Y as g,y as S,l as T}from"./index-69f66825.js";const Y=()=>{const F=P();l.useEffect(()=>{F(L("Admin Management")),N()},[]);const[u,c]=l.useState(!1),[h,y]=l.useState("list"),[f]=l.useState({first_name:"",last_name:"",email:"",level:"admin",reset_required:!1,status:"active",password:""}),[s,m]=l.useState(JSON.parse(JSON.stringify(f))),[_,k]=l.useState(""),[q,A]=l.useState([]),[x,U]=l.useState([]),[v,p]=l.useState(!1),[r,I]=l.useState(!1);l.useEffect(()=>{const t=localStorage.getItem("userData");if(t){const{level:i}=JSON.parse(t);I(i==="admin")}},[]),l.useEffect(()=>{u&&p(!1)},[u]);const N=async()=>{try{const t=await b.getAllUsers();console.log("Fetched users:",t);const i=t.filter(o=>o.level==="admin");A(i),U(i)}catch(t){console.error("Error details:",t),d("Error fetching users","error")}},n=t=>{const{value:i,id:o}=t.target;m({...s,[o]:i})},w=async()=>{if(!s.first_name)return d("First Name is required.","error"),!0;if(!s.email)return d("Email is required.","error"),!0;if(!s.id&&!s.password)return d("Password is required for new users.","error"),!0;try{if(s.id){const t=s.password?s:{...s,password:void 0};await b.updateUser(s.id,t),d("User has been updated successfully.")}else await b.createUser(s),d("User has been saved successfully.");c(!1),N()}catch(t){console.error("Error saving user:",t),d("Error saving user","error")}},C=(t=null)=>{const i=JSON.parse(JSON.stringify(f));if(m(i),t){let o=JSON.parse(JSON.stringify(t));m(o),p(!1)}else m(i),p(!0);c(!0)},j=()=>{p(!v)},E=async t=>{try{await b.deleteUser(t.id),d("User has been deleted successfully."),N()}catch{d("Error deleting user","error")}},d=(t="",i="success")=>{$.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:i,title:t,padding:"10px 20px"})};return a("div",{children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e("h2",{className:"text-xl",children:"Admin Management"}),a("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[a("div",{className:"flex gap-3",children:[e("div",{children:a("button",{type:"button",className:`btn btn-primary ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>{r&&(c(!0),m(f))},disabled:!r,children:[e(M,{className:"ltr:mr-2 rtl:ml-2"}),"Add Admin"]})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${h==="list"?"bg-primary text-white":""}`,onClick:()=>y("list"),children:e(D,{})})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${h==="grid"?"bg-primary text-white":""}`,onClick:()=>y("grid"),children:e(J,{})})})]}),a("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search Admins...",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:_,onChange:t=>k(t.target.value)}),e("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:e(O,{className:"mx-auto"})})]})]})]}),h==="list"&&e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"table-responsive",children:a("table",{className:"table-striped table-hover",children:[e("thead",{children:a("tr",{children:[e("th",{children:"First Name"}),e("th",{children:"Last Name"}),e("th",{children:"Email"}),e("th",{children:"Status"}),e("th",{children:"Created At"}),e("th",{children:"Updated At"}),e("th",{className:"!text-center",children:"Actions"})]})}),e("tbody",{children:x.map(t=>a("tr",{children:[e("td",{children:t.first_name}),e("td",{children:t.last_name}),e("td",{children:t.email}),e("td",{children:e("span",{className:`badge ${t.status==="active"?"badge-outline-success":"badge-outline-danger"}`,children:t.status})}),e("td",{children:t.created_at}),e("td",{children:t.updated_at}),e("td",{children:a("div",{className:"flex gap-4 items-center justify-center",children:[e("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>C(t),children:"View"}),e("button",{type:"button",className:`btn btn-sm btn-outline-danger ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>r&&E(t),disabled:!r,children:"Delete"})]})})]},t.id))})]})})}),h==="grid"&&e("div",{className:"grid 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 mt-5 w-full",children:x.map(t=>e("div",{className:"bg-white dark:bg-[#1c232f] rounded-md overflow-hidden text-center shadow relative",children:a("div",{className:"p-6",children:[a("div",{className:"text-xl",children:[t.first_name," ",t.last_name]}),e("div",{className:"text-white-dark",children:t.email}),e("div",{className:"mt-4",children:a("span",{className:`badge ${t.status==="active"?"badge-outline-success":"badge-outline-danger"}`,children:["Status: ",t.status]})}),a("div",{className:"mt-6 flex gap-4",children:[e("button",{type:"button",className:"btn btn-outline-primary w-1/2",onClick:()=>C(t),children:"View"}),e("button",{type:"button",className:`btn btn-outline-danger w-1/2 ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>r&&E(t),disabled:!r,children:"Delete"})]})]})},t.id))}),e(g,{appear:!0,show:u,as:l.Fragment,children:a(S,{as:"div",open:u,onClose:()=>c(!1),className:"relative z-[51]",children:[e(g.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(g.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(S.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>c(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(T,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:s.id?v?"Edit Admin":"Admin Details":"Add Admin"}),e("div",{className:"p-5",children:s.id?e("div",{children:v?a("form",{children:[a("div",{className:"mb-5",children:[e("label",{htmlFor:"first_name",children:"First Name"}),e("input",{id:"first_name",type:"text",placeholder:"Enter First Name",className:"form-input",value:s.first_name,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"last_name",children:"Last Name"}),e("input",{id:"last_name",type:"text",placeholder:"Enter Last Name",className:"form-input",value:s.last_name,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{id:"email",type:"email",placeholder:"Enter Email",className:"form-input",value:s.email,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{id:"password",type:"password",placeholder:"Enter Password",className:"form-input",value:s.password,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"status",children:"Status"}),a("select",{id:"status",className:"form-select",value:s.status,onChange:t=>n(t),children:[e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>c(!1),children:"Cancel"}),e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:w,children:"Update"})]})]}):a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"First Name:"}),e("div",{className:"w-2/3 text-gray-800",children:s.first_name})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Last Name:"}),e("div",{className:"w-2/3 text-gray-800",children:s.last_name})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Email:"}),e("div",{className:"w-2/3 text-gray-800",children:s.email})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Status:"}),e("div",{className:"w-2/3",children:e("span",{className:`badge ${s.status==="active"?"badge-outline-success":"badge-outline-danger"}`,children:s.status})})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Created At:"}),e("div",{className:"w-2/3 text-gray-800",children:s.created_at})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Updated At:"}),e("div",{className:"w-2/3 text-gray-800",children:s.updated_at})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>c(!1),children:"Close"}),e("button",{type:"button",className:`btn btn-primary ltr:ml-4 rtl:mr-4 ${r?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>r&&j(),disabled:!r,children:"Edit"})]})]})}):a("form",{children:[a("div",{className:"mb-5",children:[e("label",{htmlFor:"first_name",children:"First Name"}),e("input",{id:"first_name",type:"text",placeholder:"Enter First Name",className:"form-input",value:s.first_name,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"last_name",children:"Last Name"}),e("input",{id:"last_name",type:"text",placeholder:"Enter Last Name",className:"form-input",value:s.last_name,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{id:"email",type:"email",placeholder:"Enter Email",className:"form-input",value:s.email,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{id:"password",type:"password",placeholder:"Enter Password",className:"form-input",value:s.password,onChange:t=>n(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"status",children:"Status"}),a("select",{id:"status",className:"form-select",value:s.status,onChange:t=>n(t),children:[e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>c(!1),children:"Cancel"}),e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:w,children:"Add"})]})]})})]})})})})]})})]})};export{Y as default};
