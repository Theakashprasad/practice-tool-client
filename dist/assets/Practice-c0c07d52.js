import{aR as p,u as K,r as s,s as Q,j as a,b as e,A as W,i as Z,af as ee,k as te,Y as C,y as $,l as ae,F as U,S as P}from"./index-4912058c.js";const re=async()=>{try{const h=await fetch(`${p}/api/users?level=staff`);if(!h.ok)throw new Error("Failed to fetch staff users");return await h.json()}catch(h){return console.error("Error fetching staff users:",h),[]}},A={id:"",name:"",currency:"",staffPartnerId:"",staffManager1Id:"",staffManager2Id:"",staffAccountantIds:"",staffBookkeeper1Id:"",staffBookkeeper2Id:"",staffTaxSpecialistId:"",staffOther1Id:"",staffOther2Id:"",staffOther3Id:"",staffOther4Id:"",staffOther5Id:"",staffAdmin1Id:"",staffAdmin2Id:"",clientGroupIds:[],createdAt:"",updatedAt:""},u={id:"1",name:"Demo Practice",currency:"USD",staffPartnerId:"P001",staffManager1Id:"M001",staffManager2Id:"M002",staffAccountantIds:"A001,A002",staffBookkeeper1Id:"B001",staffBookkeeper2Id:"B002",staffTaxSpecialistId:"T001",staffOther1Id:"O001",staffOther2Id:"O002",staffOther3Id:"O003",staffOther4Id:"O004",staffOther5Id:"O005",staffAdmin1Id:"AD001",staffAdmin2Id:"AD002",clientGroupIds:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},se=()=>{const h=K(),[y,M]=s.useState([]),[D,T]=s.useState(!0);s.useEffect(()=>{h(Q("Practice Management")),k(),J(),re().then(t=>{M(t||[]),T(!1)}).catch(t=>{console.error("Error fetching staff users:",t),M([]),T(!1)})},[]);const[N,i]=s.useState(!1),[b,B]=s.useState("list"),[r,o]=s.useState({...A}),[E,x]=s.useState([u]),[g,S]=s.useState([u]),[v,V]=s.useState(""),[m,I]=s.useState(!1),[f,F]=s.useState(!1),[_,q]=s.useState([]);s.useEffect(()=>{S(E.filter(t=>t.name.toLowerCase().includes(v.toLowerCase())||t.currency.toLowerCase().includes(v.toLowerCase())))},[v,E]);const k=async()=>{try{const n=await(await fetch(`${p}/api/practices`)).json();Array.isArray(n)&&n.length>0?(x(n),S(n)):(x([u]),S([u]))}catch(t){console.error(t),x([u]),S([u])}},J=async()=>{try{const n=await(await fetch(`${p}/api/client-groups`)).json();Array.isArray(n)&&q(n)}catch(t){console.error("Error fetching client groups:",t)}},w=t=>{const{name:n,value:d}=t.target;o(l=>({...l,[n]:d}))},R=t=>{const{value:n,checked:d}=t.target;o(l=>{const L=l.clientGroupIds||[];return d?{...l,clientGroupIds:[...L,n]}:{...l,clientGroupIds:L.filter(H=>H!==n)}})},Y=t=>{const n=Array.from(t.target.selectedOptions,d=>d.value);o(d=>({...d,staffAccountantIds:n.join(",")}))},j=async()=>{try{m?await fetch(`${p}/api/practices/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}):(await fetch(`${p}/api/practices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),P.fire({icon:"success",title:"Practice created!"})),i(!1),o({...A}),I(!1),k()}catch(t){console.error(t)}},G=t=>{o({...t,staffAccountantIds:Array.isArray(t.staffAccountantIds)?t.staffAccountantIds.join(","):t.staffAccountantIds}),I(!0),F(!0),i(!0)},z=()=>{o({...A}),I(!1),i(!0)},O=async t=>{try{await fetch(`${p}/api/practices/${t}`,{method:"DELETE"}),P.fire({icon:"success",title:"Practice deleted!"}),i(!1),o({...A}),I(!1),k()}catch(n){P.fire({icon:"error",title:"Failed to delete practice"}),console.error(n)}},X=N&&(m||Object.keys(r).length>0),c=(t,n,d)=>a("div",{className:"mb-5",children:[e("label",{htmlFor:t,children:d}),a("select",{id:t,name:t,className:"form-select",value:n,onChange:w,disabled:f||D,children:[a("option",{value:"",children:["Select ",d]}),Array.isArray(y)&&y.map(l=>a("option",{value:l.id,children:[l.first_name," ",l.last_name," (",l.email,")"]},l.id))]})]});return a("div",{children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e("h2",{className:"text-xl",children:"Practice Management"}),a("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[a("div",{className:"flex gap-3",children:[e("div",{children:a("button",{type:"button",className:"btn btn-primary",onClick:z,children:[e(W,{className:"ltr:mr-2 rtl:ml-2"}),"Add Practice"]})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${b==="list"?"bg-primary text-white":""}`,onClick:()=>B("list"),children:e(Z,{})})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${b==="grid"?"bg-primary text-white":""}`,onClick:()=>B("grid"),children:e(ee,{})})})]}),a("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search Practices",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:v,onChange:t=>V(t.target.value)}),e("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:e(te,{className:"mx-auto"})})]})]})]}),b==="list"&&e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"table-responsive",children:a("table",{className:"table-striped table-hover",children:[e("thead",{children:a("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Currency"}),e("th",{children:"Staff Partner ID"}),e("th",{children:"Staff Manager 1 ID"}),e("th",{children:"Staff Manager 2 ID"}),e("th",{children:"Staff Accountant IDs"}),e("th",{children:"Staff Bookkeeper 1 ID"}),e("th",{children:"Staff Bookkeeper 2 ID"}),e("th",{children:"Staff Tax Specialist ID"}),e("th",{children:"Staff Other 1 ID"}),e("th",{children:"Staff Other 2 ID"}),e("th",{children:"Staff Other 3 ID"}),e("th",{children:"Staff Other 4 ID"}),e("th",{children:"Staff Other 5 ID"}),e("th",{children:"Staff Admin 1 ID"}),e("th",{children:"Staff Admin 2 ID"}),e("th",{children:"Created At"}),e("th",{children:"Updated At"}),e("th",{className:"!text-center",children:"Actions"})]})}),e("tbody",{children:g.length===0?e("tr",{children:e("td",{colSpan:19,className:"text-center py-8",children:"No Data found."})}):g.map(t=>a("tr",{children:[e("td",{children:t.name}),e("td",{children:t.currency}),e("td",{children:t.staffPartnerId}),e("td",{children:t.staffManager1Id}),e("td",{children:t.staffManager2Id}),e("td",{children:Array.isArray(t.staffAccountantIds)?t.staffAccountantIds.join(", "):t.staffAccountantIds}),e("td",{children:t.staffBookkeeper1Id}),e("td",{children:t.staffBookkeeper2Id}),e("td",{children:t.staffTaxSpecialistId}),e("td",{children:t.staffOther1Id}),e("td",{children:t.staffOther2Id}),e("td",{children:t.staffOther3Id}),e("td",{children:t.staffOther4Id}),e("td",{children:t.staffOther5Id}),e("td",{children:t.staffAdmin1Id}),e("td",{children:t.staffAdmin2Id}),e("td",{children:t.createdAt?new Date(t.createdAt).toLocaleString():""}),e("td",{children:t.updatedAt?new Date(t.updatedAt).toLocaleString():""}),e("td",{children:a("div",{className:"flex gap-4 items-center justify-center",children:[e("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>G(t),children:"View"}),e("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>O(t.id),children:"Delete"})]})})]},t.id))})]})})}),b==="grid"&&e("div",{className:"grid 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 mt-5 w-full",children:g.length===0?e("div",{className:"col-span-full text-center py-8 w-full",children:"No Data found."}):g.map(t=>e("div",{className:"bg-white dark:bg-[#1c232f] rounded-md overflow-hidden text-center shadow relative",children:a("div",{className:"p-6",children:[e("div",{className:"text-xl",children:t.name}),e("div",{className:"text-white-dark",children:t.currency}),a("div",{className:"mt-4 flex flex-col gap-2",children:[e("div",{children:a("span",{className:"badge badge-outline-info",children:["Partner: ",t.staffPartnerId]})}),e("div",{children:a("span",{className:"badge badge-outline-info",children:["Manager1: ",t.staffManager1Id]})}),e("div",{children:a("span",{className:"badge badge-outline-info",children:["Manager2: ",t.staffManager2Id]})})]}),e("div",{className:"mt-6 flex gap-4",children:e("button",{type:"button",className:"btn btn-outline-primary w-1/2",onClick:()=>G(t),children:"View"})})]})},t.id))}),X&&e(C,{appear:!0,show:N,as:s.Fragment,children:a($,{as:"div",open:N,onClose:()=>i(!1),className:"relative z-[51]",children:[e(C.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(C.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a($.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-3xl text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>i(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(ae,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:f?"View Practice":m?"Edit Practice":"Add Practice"}),e("div",{className:"p-5",children:a("form",{onSubmit:t=>{t.preventDefault(),j()},children:[a("div",{className:"mb-5",children:[e("label",{htmlFor:"name",children:"Name"}),e("input",{id:"name",name:"name",type:"text",placeholder:"Enter Name",className:"form-input",value:r.name,onChange:w,required:!0,readOnly:f})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"currency",children:"Currency"}),e("input",{id:"currency",name:"currency",type:"text",placeholder:"Enter Currency",className:"form-input",value:r.currency,onChange:w,required:!0,maxLength:3,readOnly:f})]}),c("staffPartnerId",r.staffPartnerId,"Staff Partner"),c("staffManager1Id",r.staffManager1Id,"Staff Manager 1"),c("staffManager2Id",r.staffManager2Id,"Staff Manager 2"),c("staffBookkeeper1Id",r.staffBookkeeper1Id,"Staff Bookkeeper 1"),c("staffBookkeeper2Id",r.staffBookkeeper2Id,"Staff Bookkeeper 2"),c("staffTaxSpecialistId",r.staffTaxSpecialistId,"Staff Tax Specialist"),c("staffOther1Id",r.staffOther1Id,"Staff Other 1"),c("staffOther2Id",r.staffOther2Id,"Staff Other 2"),c("staffOther3Id",r.staffOther3Id,"Staff Other 3"),c("staffOther4Id",r.staffOther4Id,"Staff Other 4"),c("staffOther5Id",r.staffOther5Id,"Staff Other 5"),c("staffAdmin1Id",r.staffAdmin1Id,"Staff Admin 1"),c("staffAdmin2Id",r.staffAdmin2Id,"Staff Admin 2"),a("div",{className:"mb-5",children:[e("label",{htmlFor:"staffAccountantIds",children:"Staff Accountants"}),e("select",{id:"staffAccountantIds",name:"staffAccountantIds",multiple:!0,className:"form-multiselect",value:r.staffAccountantIds?r.staffAccountantIds.split(","):[],onChange:Y,disabled:f||D,children:Array.isArray(y)&&y.map(t=>a("option",{value:t.id,children:[t.first_name," ",t.last_name," (",t.email,")"]},t.id))})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"clientGroupIds",children:"Client Groups"}),a("select",{id:"clientGroupIds",name:"clientGroupIds",multiple:!0,className:"form-input",value:r.clientGroupIds,onChange:R,disabled:f,children:[e("option",{value:"",children:"Select client groups"}),_.map(t=>e("option",{value:t.id,children:t.name},t.id))]})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>i(!1),children:"Cancel"}),f?a(U,{children:[e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:()=>{F(!1),I(!0)},children:"Edit"}),e("button",{type:"button",className:"btn btn-danger ltr:ml-4 rtl:mr-4",onClick:()=>O(r.id),children:"Delete"})]}):a(U,{children:[e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:()=>j(),children:m?"Update":"Create"}),m&&e("button",{type:"button",className:"btn btn-danger ltr:ml-4 rtl:mr-4",onClick:()=>O(r.id),children:"Delete"})]})]})]})})]})})})})]})})]})};export{se as default};
