import{u as L,ak as q,ap as A,r as i,s as D,ao as N,an as y,a as g,j as a,b as e,F as I,L as k}from"./index-69f66825.js";import{I as R}from"./IconGoogle-13edceb3.js";const M=()=>{const b=L(),m=q(),[_]=A(),l=_.get("token");i.useEffect(()=>{b(D("Register Boxed")),l&&P()},[l,b]);const[h,p]=i.useState(null),[C,u]=i.useState(""),P=async()=>{var r,n;try{const s=await N.get(`${y}/api/invitation/validate/token?token=${l}`);s.data.valid?(p(!0),u(s.data.message),f(o=>({...o,email:s.data.invitation.email,first_name:s.data.invitation.first_name||"",last_name:s.data.invitation.last_name||""})),E(s.data.invitation.level)):(p(!1),u(s.data.message),m("/auth/boxed-signin"))}catch(s){p(!1),u(((n=(r=s.response)==null?void 0:r.data)==null?void 0:n.message)||"Error validating token"),m("/auth/boxed-signin")}};g(r=>r.themeConfig.theme==="dark"||r.themeConfig.isDarkMode),g(r=>r.themeConfig.rtlClass);const S=g(r=>r.themeConfig),[F,E]=i.useState("client"),[t,f]=i.useState({first_name:"",last_name:"",email:"",password:"",confirm_password:""}),[v,d]=i.useState(""),[w,x]=i.useState(!1);i.useState(S.locale);const c=r=>{const{name:n,value:s}=r.target;f(o=>({...o,[n]:s}))},j=()=>!t.password||!t.confirm_password?(d("Please enter and confirm your password"),!1):t.password!==t.confirm_password?(d("Passwords do not match"),!1):t.password.length<6?(d("Password must be at least 6 characters long"),!1):!0;return a("div",{className:"min-h-screen relative bg-[#060818] flex items-center justify-center",children:[a("div",{className:"absolute inset-0 overflow-hidden",children:[e("img",{src:"/assets/images/auth/bg-gradient.png",alt:"background",className:"absolute w-full h-full object-cover"}),e("div",{className:"absolute inset-0 bg-[url(/assets/images/auth/map.png)] bg-center bg-cover bg-no-repeat opacity-20"}),e("img",{src:"/assets/images/auth/coming-soon-object1.png",alt:"decoration",className:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2 opacity-20"}),e("img",{src:"/assets/images/auth/coming-soon-object2.png",alt:"decoration",className:"absolute left-24 top-0 h-40 md:left-[30%] opacity-20"}),e("img",{src:"/assets/images/auth/coming-soon-object3.png",alt:"decoration",className:"absolute right-0 top-0 h-[300px] opacity-20"}),e("img",{src:"/assets/images/auth/polygon-object.svg",alt:"decoration",className:"absolute bottom-0 end-[28%] opacity-20"})]}),e("div",{className:"container relative z-10",children:e("div",{className:"flex items-center justify-center min-h-screen",children:e("div",{className:"panel sm:w-[600px] m-6 w-full",children:a("div",{className:"w-full p-5 bg-white rounded-lg shadow-lg dark:bg-navy-700",children:[l&&e("div",{className:`mb-4 p-4 rounded-lg shadow-sm ${h===!0?"bg-green-50 border border-green-200 text-green-500":h===!1?"bg-red-50 border border-red-200 text-red-500":"bg-yellow-50 border border-yellow-200 text-yellow-500"}`,children:C}),a("div",{className:"mb-10",children:[e("h1",{className:"text-3xl font-extrabold uppercase !leading-snug text-primary md:text-4xl",children:l?"Set Up Your Account":"Create Account"}),e("p",{className:"text-base font-bold leading-normal text-white-dark",children:l?"Create your password to complete account setup":"Sign up to get started"})]}),v&&e("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-500 rounded-lg shadow-sm",children:v}),a("form",{className:"space-y-5 dark:text-white",onSubmit:async r=>{var n,s;if(r.preventDefault(),d(""),!!j()){x(!0);try{(await N.post(`${y}/api/auth/register`,{first_name:t.first_name,last_name:t.last_name,email:t.email,password_hash:t.password,level:F,...l&&{token:l}})).status===201&&m("/auth/boxed-signin")}catch(o){d(((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.error)||"Registration failed. Please try again.")}finally{x(!1)}}},children:[!l&&a(I,{children:[a("div",{children:[e("label",{htmlFor:"FirstName",children:"First Name"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"FirstName",type:"text",name:"first_name",placeholder:"Enter First Name",className:"form-input ps-10 placeholder:text-white-dark",value:t.first_name,onChange:c,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]}),a("div",{children:[e("label",{htmlFor:"LastName",children:"Last Name"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"LastName",type:"text",name:"last_name",placeholder:"Enter Last Name",className:"form-input ps-10 placeholder:text-white-dark",value:t.last_name,onChange:c,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]}),a("div",{children:[e("label",{htmlFor:"Email",children:"Email"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"Email",type:"email",name:"email",placeholder:"Enter Email",className:"form-input ps-10 placeholder:text-white-dark",value:t.email,onChange:c,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]})]}),a("div",{children:[e("label",{htmlFor:"Password",children:"Password"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"Password",type:"password",name:"password",placeholder:"Enter Password",className:"form-input ps-10 placeholder:text-white-dark",value:t.password,onChange:c,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]}),a("div",{children:[e("label",{htmlFor:"ConfirmPassword",children:"Confirm Password"}),a("div",{className:"relative text-white-dark",children:[e("input",{id:"ConfirmPassword",type:"password",name:"confirm_password",placeholder:"Confirm Password",className:"form-input ps-10 placeholder:text-white-dark",value:t.confirm_password,onChange:c,required:!0}),e("span",{className:"absolute start-4 top-1/2 -translate-y-1/2"})]})]}),e("button",{type:"submit",className:"btn btn-gradient !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",disabled:w||l!==null&&h===!1,children:w?"Signing up...":"Sign up"})]}),a("div",{className:"relative my-7 text-center md:mb-9",children:[e("span",{className:"absolute inset-x-0 top-1/2 h-px w-full -translate-y-1/2 bg-white-light dark:bg-white-dark"}),e("span",{className:"relative bg-white px-2 font-bold uppercase text-white-dark dark:bg-dark dark:text-white-light",children:"or"})]}),e("div",{className:"mb-10 md:mb-[60px]",children:e("ul",{className:"flex justify-center gap-3.5",children:e("li",{children:e(k,{to:"#",className:"inline-flex h-8 w-8 items-center justify-center rounded-full p-0 transition hover:scale-110",style:{background:"linear-gradient(135deg, rgba(239, 18, 98, 1) 0%, rgba(67, 97, 238, 1) 100%)"},children:e(R,{})})})})}),a("div",{className:"text-center",children:["Already have an account ?Â ",e(k,{to:"/auth/boxed-signin",className:"uppercase text-primary underline transition hover:text-black dark:hover:text-white",children:"SIGN IN"})]})]})})})})]})};export{M as default};
