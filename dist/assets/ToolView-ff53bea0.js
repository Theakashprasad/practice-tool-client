import{aN as A,ak as D,u as U,r as c,s as j,S as N,b as e,j as a,I as L,F,B as P,E as B,h as M}from"./index-69f66825.js";import{I as q}from"./IconEdit-4d09e3f4.js";const o="text-gray-500 font-semibold flex items-center gap-2",l="mt-1 text-lg text-gray-900 dark:text-white-dark break-words",V="rounded-lg bg-white dark:bg-[#181f2c] shadow p-6 mb-6 border border-gray-100 dark:border-gray-800",$="col-span-full border-b border-dashed border-gray-200 my-2",_=()=>{const{id:b}=A(),m=D(),y=U(),[t,u]=c.useState(null),[x,h]=c.useState(!0),[p,f]=c.useState(!1),[w,C]=c.useState(!1),[r,g]=c.useState(!0);c.useEffect(()=>{y(j("Tool Details")),I(),E()},[]);const E=()=>{const s=localStorage.getItem("userData");if(s){const{level:n}=JSON.parse(s);C(n==="admin")}},I=async()=>{try{h(!0);const s=await fetch(`http://localhost:3000/api/tools/${b}`);if(!s.ok)throw new Error("Failed to fetch tool");const n=await s.json();u(n)}catch(s){console.error("Error fetching tool:",s),d("Error fetching tool data","error")}finally{h(!1)}},i=s=>{const{name:n,value:v,type:T}=s.target;t&&u({...t,[n]:T==="checkbox"?s.target.checked:v})},k=async s=>{if(s.preventDefault(),!!t){f(!0);try{if(!(await fetch(`http://localhost:3000/api/tools/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Failed to update tool");d("Tool updated successfully"),g(!1)}catch(n){console.error("Error updating tool:",n),d("Error updating tool","error")}finally{f(!1)}}},S=async()=>{if((await N.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",padding:"2em"})).isConfirmed)try{if(!(await fetch(`http://localhost:3000/api/tools/${t==null?void 0:t.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete tool");d("Tool deleted successfully"),m("/apps/tools")}catch(n){console.error("Error deleting tool:",n),d("Error deleting tool","error")}},d=(s="",n="success")=>{N.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:n,title:s,padding:"10px 20px"})};return x?e("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):t?a("div",{className:"max-w-4xl mx-auto mt-8",children:[a("div",{className:"flex items-center justify-between mb-8",children:[a("button",{type:"button",className:"btn btn-outline-primary flex items-center gap-2",onClick:()=>m("/apps/tools"),children:[e(L,{}),e("span",{children:"Back to List"})]}),e("div",{className:"flex gap-3",children:w&&a(F,{children:[a("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>g(!r),children:[e(q,{}),r?"Cancel Edit":"Edit"]}),a("button",{type:"button",className:"btn btn-outline-danger",onClick:S,children:[e(P,{}),"Delete"]})]})})]}),e("div",{className:V,children:a("form",{onSubmit:k,children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[e("div",{className:"col-span-2",children:a("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[e(B,{}),"Basic Information"]})}),a("div",{children:[e("span",{className:o,children:"Name"}),r?e("input",{name:"name",className:"form-input mt-1 w-full",value:t.name,onChange:i,required:!0}):e("div",{className:l,children:t.name})]}),a("div",{children:[e("span",{className:o,children:"Category"}),r?a("select",{name:"category",className:"form-select mt-1 w-full",value:t.category,onChange:i,required:!0,children:[e("option",{value:"",children:"Select Category"}),e("option",{value:"HR",children:"HR"}),e("option",{value:"Finance",children:"Finance"}),e("option",{value:"Operations",children:"Operations"})]}):e("div",{className:l,children:t.category})]}),a("div",{className:"col-span-2",children:[e("span",{className:o,children:"Description"}),r?e("textarea",{name:"description",className:"form-textarea mt-1 w-full",value:t.description,onChange:i,required:!0}):e("div",{className:l,children:t.description})]}),a("div",{children:[e("span",{className:o,children:"Execution URL"}),r?e("input",{name:"executionUrl",type:"url",className:"form-input mt-1 w-full",value:t.executionUrl,onChange:i,required:!0}):e("div",{className:l,children:e("a",{href:t.executionUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:t.executionUrl})})]}),a("div",{children:[e("span",{className:o,children:"Starting Prompt"}),r?e("textarea",{name:"startingPrompt",className:"form-textarea mt-1 w-full",value:t.startingPrompt,onChange:i}):e("div",{className:l,children:t.startingPrompt})]}),a("div",{children:[e("span",{className:o,children:"Session Memory"}),r?a("label",{className:"inline-flex mt-1",children:[e("input",{type:"checkbox",name:"sessionMemory",className:"form-checkbox",checked:t.sessionMemory,onChange:i}),e("span",{className:"ml-2",children:"Enabled"})]}):e("div",{className:l,children:e("span",{className:`badge ${t.sessionMemory?"badge-outline-success":"badge-outline-danger"}`,children:t.sessionMemory?"Enabled":"Disabled"})})]}),a("div",{children:[e("span",{className:o,children:"Status"}),r?a("select",{name:"status",className:"form-select mt-1 w-full",value:t.status,onChange:i,required:!0,children:[e("option",{value:"ACTIVE",children:"Active"}),e("option",{value:"INACTIVE",children:"Inactive"})]}):e("div",{className:l,children:e("span",{className:`badge ${t.status==="ACTIVE"?"badge-outline-success":"badge-outline-danger"}`,children:t.status==="ACTIVE"?"Active":"Inactive"})})]}),e("div",{className:$}),e("div",{className:"col-span-2",children:a("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[e(M,{}),"Additional Information"]})}),a("div",{children:[e("span",{className:o,children:"Created At"}),e("div",{className:l,children:new Date(t.created_at).toLocaleString()})]}),a("div",{children:[e("span",{className:o,children:"Updated At"}),e("div",{className:l,children:new Date(t.updated_at).toLocaleString()})]})]}),r&&e("div",{className:"flex justify-end mt-8",children:e("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Updating...":"Update"})})]})})]}):e("div",{className:"flex items-center justify-center h-screen",children:"Tool not found"})};export{_ as default};
