import{u as q,r as s,s as A,aP as N,S as L,j as a,b as e,A as j,i as P,af as O,k as R,Y as f,y as S,l as T,aA as $,aQ as M}from"./index-4912058c.js";const Y=()=>{const _=q();s.useEffect(()=>{_(A("Contacts")),b()},[]);const[o,n]=s.useState(!1),[m,g]=s.useState("list"),[y]=s.useState({first_name:"",last_name:"",email:"",level:"",reset_required:!1,status:"active",password:""}),[l,c]=s.useState(JSON.parse(JSON.stringify(y))),[k,E]=s.useState(""),[J,F]=s.useState([]),[x,U]=s.useState([]),[p,h]=s.useState(!1);s.useEffect(()=>{o&&h(!1)},[o]);const b=async()=>{try{const t=await N.getAllUsers();console.log("Fetched users:",t),F(t),U(t)}catch(t){console.error("Error details:",t),d("Error fetching users","error")}},i=t=>{const{value:r,id:u}=t.target;c({...l,[u]:r})},w=async()=>{if(!l.email)return d("Email is required.","error"),!0;try{if(l.id){const{password:t,...r}=l;await N.updateUser(l.id,r),d("User has been updated successfully.")}else{const t=await $.post(M.INVITATION.BASE,{email:l.email,level:l.level||void 0,status:"pending"});d("Invitation has been sent successfully.")}n(!1),b()}catch(t){console.error("Error saving user:",t),d("Error saving user","error")}},v=(t=null)=>{const r=JSON.parse(JSON.stringify(y));if(c(r),t){let u=JSON.parse(JSON.stringify(t));c(u),h(!1)}else c(r),h(!0);n(!0)},I=()=>{h(!p)},C=async t=>{try{await N.deleteUser(t.id),d("User has been deleted successfully."),b()}catch{d("Error deleting user","error")}},d=(t="",r="success")=>{L.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:r,title:t,padding:"10px 20px"})};return a("div",{children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e("h2",{className:"text-xl",children:"User Management"}),a("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[a("div",{className:"flex gap-3",children:[e("div",{children:a("button",{type:"button",className:"btn btn-primary",onClick:()=>v(),children:[e(j,{className:"ltr:mr-2 rtl:ml-2"}),"Invite User"]})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${m==="list"&&"bg-primary text-white"}`,onClick:()=>g("list"),children:e(P,{})})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${m==="grid"&&"bg-primary text-white"}`,onClick:()=>g("grid"),children:e(O,{})})})]}),a("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search Contacts",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:k,onChange:t=>E(t.target.value)}),e("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:e(R,{className:"mx-auto"})})]})]})]}),m==="list"&&e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"table-responsive",children:a("table",{className:"table-striped table-hover",children:[e("thead",{children:a("tr",{children:[e("th",{children:"First Name"}),e("th",{children:"Last Name"}),e("th",{children:"Email"}),e("th",{children:"Level"}),e("th",{children:"Reset Required"}),e("th",{children:"Status"}),e("th",{children:"Created At"}),e("th",{children:"Updated At"}),e("th",{className:"!text-center",children:"Actions"})]})}),e("tbody",{children:x.map(t=>a("tr",{children:[e("td",{children:t.first_name}),e("td",{children:t.last_name}),e("td",{children:t.email}),e("td",{children:e("span",{className:"badge badge-outline-info",children:t.level})}),e("td",{children:e("span",{className:`badge ${t.reset_required?"badge-outline-warning":"badge-outline-success"}`,children:t.reset_required?"Yes":"No"})}),e("td",{children:e("span",{className:`badge ${t.status==="active"?"badge-outline-success":"badge-outline-danger"}`,children:t.status})}),e("td",{children:t.created_at}),e("td",{children:t.updated_at}),e("td",{children:a("div",{className:"flex gap-4 items-center justify-center",children:[e("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>v(t),children:"View"}),e("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>C(t),children:"Delete"})]})})]},t.id))})]})})}),m==="grid"&&e("div",{className:"grid 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 mt-5 w-full",children:x.map(t=>e("div",{className:"bg-white dark:bg-[#1c232f] rounded-md overflow-hidden text-center shadow relative",children:a("div",{className:"p-6",children:[a("div",{className:"text-xl",children:[t.first_name," ",t.last_name]}),e("div",{className:"text-white-dark",children:t.email}),a("div",{className:"mt-4 flex flex-col gap-2",children:[e("div",{children:a("span",{className:"badge badge-outline-info",children:["Level: ",t.level]})}),e("div",{children:a("span",{className:`badge ${t.reset_required?"badge-outline-warning":"badge-outline-success"}`,children:["Reset Required: ",t.reset_required?"Yes":"No"]})}),e("div",{children:a("span",{className:`badge ${t.status==="active"?"badge-outline-success":"badge-outline-danger"}`,children:["Status: ",t.status]})})]}),a("div",{className:"mt-6 flex gap-4",children:[e("button",{type:"button",className:"btn btn-outline-primary w-1/2",onClick:()=>v(t),children:"Edit"}),e("button",{type:"button",className:"btn btn-outline-danger w-1/2",onClick:()=>C(t),children:"Delete"})]})]})},t.id))}),e(f,{appear:!0,show:o,as:s.Fragment,children:a(S,{as:"div",open:o,onClose:()=>n(!1),className:"relative z-[51]",children:[e(f.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(f.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a(S.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>n(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(T,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:l.id?p?"Edit User":"User Details":"Invite User"}),e("div",{className:"p-5",children:l.id?e("div",{children:p?a("form",{children:[a("div",{className:"mb-5",children:[e("label",{htmlFor:"first_name",children:"First Name"}),e("input",{id:"first_name",type:"text",placeholder:"Enter First Name",className:"form-input",value:l.first_name,onChange:t=>i(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"last_name",children:"Last Name"}),e("input",{id:"last_name",type:"text",placeholder:"Enter Last Name",className:"form-input",value:l.last_name,onChange:t=>i(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{id:"email",type:"email",placeholder:"Enter Email",className:"form-input",value:l.email,onChange:t=>i(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{id:"password",type:"password",placeholder:"Enter Password",className:"form-input",value:l.password,onChange:t=>i(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"level",children:"Level"}),a("select",{id:"level",className:"form-select",value:l.level,onChange:t=>i(t),children:[e("option",{value:"",children:"Not Selected"}),e("option",{value:"admin",children:"Admin"}),e("option",{value:"staff",children:"Staff"}),e("option",{value:"client",children:"Client"})]})]}),e("div",{className:"mb-5",children:a("label",{htmlFor:"reset_required",className:"inline-flex items-center",children:[e("input",{type:"checkbox",id:"reset_required",className:"form-checkbox",checked:l.reset_required,onChange:t=>c({...l,reset_required:t.target.checked})}),e("span",{className:"ltr:ml-2 rtl:mr-2",children:"Reset Required"})]})}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"status",children:"Status"}),a("select",{id:"status",className:"form-select",value:l.status,onChange:t=>i(t),children:[e("option",{value:"active",children:"Active"}),e("option",{value:"inactive",children:"Inactive"})]})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>n(!1),children:"Cancel"}),e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:w,children:"Update"})]})]}):a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"First Name:"}),e("div",{className:"w-2/3 text-gray-800",children:l.first_name})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Last Name:"}),e("div",{className:"w-2/3 text-gray-800",children:l.last_name})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Email:"}),e("div",{className:"w-2/3 text-gray-800",children:l.email})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Level:"}),e("div",{className:"w-2/3",children:e("span",{className:"badge badge-outline-info",children:l.level})})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Reset Required:"}),e("div",{className:"w-2/3",children:e("span",{className:`badge ${l.reset_required?"badge-outline-warning":"badge-outline-success"}`,children:l.reset_required?"Yes":"No"})})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Status:"}),e("div",{className:"w-2/3",children:e("span",{className:`badge ${l.status==="active"?"badge-outline-success":"badge-outline-danger"}`,children:l.status})})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Created At:"}),e("div",{className:"w-2/3 text-gray-800",children:l.created_at})]}),a("div",{className:"flex items-center border-b pb-3",children:[e("div",{className:"w-1/3 font-semibold text-gray-500",children:"Updated At:"}),e("div",{className:"w-2/3 text-gray-800",children:l.updated_at})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>n(!1),children:"Close"}),e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:I,children:"Edit"})]})]})}):a("form",{children:[a("div",{className:"mb-5",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{id:"email",type:"email",placeholder:"Enter Email",className:"form-input",value:l.email,onChange:t=>i(t)})]}),a("div",{className:"mb-5",children:[e("label",{htmlFor:"level",children:"Level (Optional)"}),a("select",{id:"level",className:"form-select",value:l.level,onChange:t=>i(t),children:[e("option",{value:"",children:"Not Selected"}),e("option",{value:"admin",children:"Admin"}),e("option",{value:"staff",children:"Staff"}),e("option",{value:"client",children:"Client"})]})]}),a("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>n(!1),children:"Cancel"}),e("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:w,children:"Send Invitation"})]})]})})]})})})})]})})]})};export{Y as default};
