import{aN as B,ak as j,r as d,aD as L,ao as E,an as u,b as t,j as a,I as F,aO as M,aP as T,aQ as R,aR as I,aS as _,S as g,aT as $}from"./index-69f66825.js";const l="text-gray-500 font-semibold flex items-center gap-2",k="mt-1 text-lg text-gray-900 dark:text-white-dark break-words",w="rounded-lg bg-white dark:bg-[#181f2c] shadow p-6 mb-6 border border-gray-100 dark:border-gray-800",C="col-span-full border-b border-dashed border-gray-200 my-2",G=[{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"AUD",name:"Australian Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"JPY",name:"Japanese Yen"},{code:"CNY",name:"Chinese Yuan"},{code:"INR",name:"Indian Rupee"}],J=()=>{const{id:m}=B(),y=j(),[r,p]=d.useState(null),[o,v]=d.useState([]),[f,x]=d.useState([]),[P,N]=d.useState(!0),[b,S]=d.useState(!1);d.useEffect(()=>{A(),O()},[m]);const O=async()=>{try{const[e,i]=await Promise.all([L.getAllUsers(),E.get(`${u}/api/invitation`)]);v(Array.isArray(e)?e.map(c=>({...c,id:String(c.id)})):[]),x(Array.isArray(i.data)?i.data:[])}catch(e){console.error("Error fetching staff users and invitations:",e),v([]),x([])}},A=async()=>{try{const i=await(await fetch(`${u}/api/practices/${m}?withStaff=true`)).json();p(i),N(!1)}catch(e){console.error("Error fetching practice details:",e),N(!1)}},h=e=>{const{name:i,value:c}=e.target;p(n=>({...n,[i]:c}))},U=e=>{const i=Array.from(e.target.selectedOptions,c=>c.value);p(c=>({...c,staffAccountantIds:i}))},D=async e=>{e.preventDefault(),S(!0);try{(await fetch(`${u}/api/practices/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(g.fire({icon:"success",title:"Practice updated!"}),A()):g.fire({icon:"error",title:"Failed to update practice"})}catch{g.fire({icon:"error",title:"Failed to update practice"})}finally{S(!1)}},s=(e,i,c)=>a("div",{children:[a("span",{className:l,children:[$({})," ",c]}),a("select",{name:e,className:"form-select mt-1 w-full",value:i||"",onChange:h,children:[a("option",{value:"",children:["Select ",c]}),Array.isArray(o)&&o.map(n=>a("option",{value:n.id,children:[n.first_name," ",n.last_name," (",n.email,")"]},n.id)),Array.isArray(f)&&f.filter(n=>n.status==="pending").map(n=>a("option",{value:n.id,children:[n.email," (Pending Invitation)"]},n.id))]})]});return P?t("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):r?a("div",{className:"max-w-4xl mx-auto mt-8",children:[a("div",{className:"flex items-center justify-between mb-8",children:[a("button",{type:"button",className:"btn btn-outline-primary flex items-center gap-2",onClick:()=>y("/apps/practice"),children:[t(F,{className:"w-5 h-5"}),t("span",{children:"Back to List"})]}),t("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Practice Details"})]}),a("form",{className:w,onSubmit:D,children:[a("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[a("div",{children:[a("span",{className:l,children:[M({color:"var(--primary)"})," Name"]}),t("input",{name:"name",className:"form-input mt-1 w-full",value:r.name||"",onChange:h,required:!0})]}),a("div",{children:[a("span",{className:l,children:[T({color:"#16a34a"}),"Currency"]}),a("select",{name:"currency",className:"form-select mt-1 w-full",value:r.currency||"",onChange:h,required:!0,children:[t("option",{value:"",children:"Select Currency"}),G.map(e=>a("option",{value:e.code,children:[e.code," - ",e.name]},e.code))]})]}),t("div",{className:C}),s("staffPartnerId",r.staffPartnerId,"Staff Partner"),s("staffManager1Id",r.staffManager1Id,"Staff Manager 1"),s("staffManager2Id",r.staffManager2Id,"Staff Manager 2"),s("staffBookkeeper1Id",r.staffBookkeeper1Id,"Staff Bookkeeper 1"),s("staffBookkeeper2Id",r.staffBookkeeper2Id,"Staff Bookkeeper 2"),s("staffTaxSpecialistId",r.staffTaxSpecialistId,"Staff Tax Specialist"),s("staffOther1Id",r.staffOther1Id,"Staff Other 1"),s("staffOther2Id",r.staffOther2Id,"Staff Other 2"),s("staffOther3Id",r.staffOther3Id,"Staff Other 3"),s("staffOther4Id",r.staffOther4Id,"Staff Other 4"),s("staffOther5Id",r.staffOther5Id,"Staff Other 5"),s("staffAdmin1Id",r.staffAdmin1Id,"Staff Admin 1"),s("staffAdmin2Id",r.staffAdmin2Id,"Staff Admin 2"),a("div",{children:[a("span",{className:l,children:[R({})," Staff Accountants"]}),a("select",{name:"staffAccountantIds",className:"form-select mt-1 w-full",value:r.staffAccountantIds||[],onChange:U,multiple:!0,children:[t("option",{value:"",children:"Select Staff Accountants"}),Array.isArray(o)&&o.map(e=>a("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id)),Array.isArray(f)&&f.filter(e=>e.status==="pending").map(e=>a("option",{value:e.id,children:[e.email," (Pending Invitation)"]},e.id))]})]}),t("div",{className:C}),a("div",{children:[a("span",{className:l,children:[" ",I({color:"3b82f6"}),"Created At"]}),t("div",{className:k,children:new Date(r.createdAt).toLocaleString()})]}),a("div",{children:[a("span",{className:l,children:[" ",I({color:"3b82f6"}),"Updated At"]}),t("div",{className:k,children:new Date(r.updatedAt).toLocaleString()})]})]}),t("div",{className:"flex justify-end mt-8",children:t("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?"Updating...":"Update"})})]}),a("div",{className:w+" p-0",children:[a("div",{className:"flex items-center gap-2 px-6 pt-6 pb-2 border-b border-gray-100 dark:border-gray-800",children:[_({color:"var(--primary)"}),t("h3",{className:"text-xl font-semibold text-primary",children:"Associated Client Groups"})]}),Array.isArray(r.clientGroups)&&r.clientGroups.length>0?t("div",{className:"overflow-x-auto p-6",children:a("table",{className:"min-w-full bg-white dark:bg-[#181f2c] rounded-lg shadow divide-y divide-gray-200 dark:divide-gray-700",children:[t("thead",{className:"bg-gray-50 dark:bg-[#232b3b]",children:a("tr",{children:[t("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase",children:"Name"}),t("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase",children:"Practice Name"})]})}),t("tbody",{children:r.clientGroups.map(e=>a("tr",{className:"transition hover:bg-primary/10",children:[a("td",{className:"px-4 py-3 font-medium text-primary cursor-pointer flex items-center gap-2 hover:underline",onClick:()=>y(`/apps/client-group/${e.id}`),children:[t("span",{children:e.name}),t("svg",{className:"w-4 h-4 text-primary group-hover:text-primary-dark",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]}),t("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:r.name})]},e.id))})]})}):t("div",{className:"text-gray-500 p-6",children:"No client groups associated with this practice."})]})]}):t("div",{className:"flex items-center justify-center h-screen",children:"Practice not found"})};export{J as default};
